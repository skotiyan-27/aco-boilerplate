/*! Copyright 2025 Adobe
All Rights Reserved. */
import{P as p,f,h as g}from"./removeProductsFromWishlist.js";function d(e,t=[]){var r,i;return e?{name:e.name,sku:e.sku,isBundle:!1,addToCartAllowed:!0,inStock:e.stock_status==="IN_STOCK",shortDescription:(r=e.short_description)==null?void 0:r.html,metaDescription:e.meta_description,metaKeyword:e.meta_keyword,metaTitle:e.meta_title,description:(i=e.description)==null?void 0:i.html,images:P(e,t),prices:h(e),attributes:v(e),options:y(e),optionUIDs:void 0,url:e.canonical_url,urlKey:e.url_key,externalId:void 0,externalParentId:void 0,variantSku:void 0,productType:b(e.__typename)}:null}function b(e){switch(e){case"SimpleProduct":case"VirtualProduct":case"DownloadableProduct":return"simple";default:return"complex"}}function y(e){var t;return e.__typename==="ConfigurableProduct"?e.configurable_options?(t=e.configurable_options)==null?void 0:t.map(r=>{var i;return{id:r.attribute_code,type:"text",label:r.uid,required:!0,multiple:!1,items:(i=r.values)==null?void 0:i.map(n=>({id:n.uid,label:n.label,inStock:!0,value:n.uid,selected:!1}))}}):[]:[]}function P(e,t=[]){var i;let r=e.thumbnail;if(e.__typename==="ConfigurableProduct"&&e.variants&&(t==null?void 0:t.length)>0){const n=t.map(o=>o.uid);let u=e.variants.find(o=>{var s;const l=((s=o.attributes)==null?void 0:s.map(c=>c.uid))||[];return n.every(c=>l.includes(c))});u||(u=e.variants.find(o=>{var l;return(l=o.attributes)==null?void 0:l.some(s=>t.some(c=>c.uid===s.uid))})),(i=u==null?void 0:u.product)!=null&&i.image&&(r=u.product.image)}return[{url:r==null?void 0:r.url,label:r==null?void 0:r.label}]}function h(e){var t,r,i,n,u,o,l,s,c,m,a,_;return{regular:{currency:((i=(r=(t=e.price_range)==null?void 0:t.minimum_price)==null?void 0:r.regular_price)==null?void 0:i.currency)??"USD",amount:((o=(u=(n=e.price_range)==null?void 0:n.minimum_price)==null?void 0:u.regular_price)==null?void 0:o.value)??0},final:{currency:((c=(s=(l=e.price_range)==null?void 0:l.minimum_price)==null?void 0:s.final_price)==null?void 0:c.currency)??"USD",amount:((_=(a=(m=e.price_range)==null?void 0:m.minimum_price)==null?void 0:a.final_price)==null?void 0:_.value)??0},visible:!0}}function v(e){var t,r;return(r=(t=e.custom_attributesV2)==null?void 0:t.items)==null?void 0:r.map(i=>{const n=i.code.split("_").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" ");return{...i,code:n}})}const T=`
  query GET_PRODUCT_BY_SKU($sku: String!) {
    products(filter: { sku: { eq: $sku } }) {
      items {
        ...PRODUCT_FRAGMENT
      }
    }
  }

${p}
`,S=async(e,t)=>{if(!e)throw Error("Product SKU is not set");return f(T,{variables:{sku:e}}).then(({errors:r,data:i})=>{var n;return r?g(r):(n=i==null?void 0:i.products)!=null&&n.items?d(i.products.items[0],t??[]):null})};export{S as g};
